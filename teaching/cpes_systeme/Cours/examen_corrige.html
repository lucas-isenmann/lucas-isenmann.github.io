<!DOCTYPE html>
<html>
<head>
<title>examen_corrige.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="examen">Examen</h1>
<h2 id="consignes">Consignes</h2>
<p>Extraire le fichier téléchargé si ce n'est pas déjà fait.
Penser à donner les droits d'éxecution aux scripts avec la commande :</p>
<pre class="hljs"><code><div>chmod +x fichier.sh
</div></code></pre>
<p>Pour rendre votre travail :</p>
<ul>
<li>compresser le dossier Examen (clic droit + compresser)</li>
<li>le rendre sur Moodle</li>
</ul>
<hr>
<h2 id="exercice-1">Exercice 1</h2>
<p>Compléter les lignes commençant par <code>#</code> dans le fichier <code>ex1.sh</code> pour que ce script demande à l'utilisateur un nombre et affiche pair s'il est pair et affiche le double de ce nombre sinon.</p>
<h3 id="solution-1">Solution 1</h3>
<pre class="hljs"><code><div><span class="hljs-built_in">read</span> n
<span class="hljs-keyword">if</span> (( <span class="hljs-variable">$n</span> % 2 == 0 ))
<span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> pair
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> $(( <span class="hljs-variable">$n</span> * 2 ))
<span class="hljs-keyword">fi</span>
</div></code></pre>
<h2 id="exercice-2">Exercice 2</h2>
<p>Ecrire dans le fichier <code>ex2.sh</code> un script qui déplace tous les fichiers <code>.txt</code> du dossier <code>ex2</code> dans le dossier <code>ex2/chats</code> puis supprime le fichier <code>ex2/test.temp</code>.</p>
<h3 id="solution-2">Solution 2</h3>
<pre class="hljs"><code><div>mv ex2/*.txt ex1/chats
rm ex2/test.temp
</div></code></pre>
<h2 id="exercice-3">Exercice 3</h2>
<p>Compléter les lignes commençant par <code>#</code> dans le fichier <code>ex3.sh</code> pour que ce script crée dans le dossier <code>ex3</code> des fichiers <code>1.txt</code>, <code>2.txt</code>, ... , <code>n.txt</code> où <code>n</code> est le paramètre fourni au script. Chaque fichier <code>i.txt</code> doit contentir le carré de <code>i</code>.</p>
<h3 id="solution-3">Solution 3</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> $(seq 1 <span class="hljs-variable">$1</span>)
<span class="hljs-keyword">do</span>
    j=$(( <span class="hljs-variable">$i</span>*<span class="hljs-variable">$i</span> ))
    <span class="hljs-built_in">echo</span> <span class="hljs-variable">$j</span> &gt; ex2/<span class="hljs-variable">$i</span>.txt
<span class="hljs-keyword">done</span>
</div></code></pre>
<h2 id="exercice-4">Exercice 4</h2>
<p>Le fichier <code>ex4/data.csv</code> contient les résultats des 10 derniers matchs du MHR. La première colonne contient le nom de l'adversaire, la seconde les points du MHR, la troisième les points de l'adversaire et la dernière contient &quot;dom&quot; si le match était à domicile et &quot;ext&quot; sinon.</p>
<p>Ecrire un script dans <code>ex4.sh</code> qui affiche les adversaires contre qui le MHR a perdu d'au plus 5 points.</p>
<p>Indication : il n'y a pas d'espaces dans le fichier de données donc pas de problème avec les guillemets &quot;&quot;.</p>
<h3 id="solution-4">Solution 4</h3>
<pre class="hljs"><code><div>fichier=$(cat ex4/data.csv)
<span class="hljs-keyword">for</span> ligne <span class="hljs-keyword">in</span> <span class="hljs-variable">$fichier</span>
<span class="hljs-keyword">do</span>
    pointsMHR=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ligne</span> | cut -d , -f2 )
    pointsADV=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ligne</span> | cut -d , -f3 )
    <span class="hljs-keyword">if</span> (( <span class="hljs-variable">$pointsMHR</span> &lt; <span class="hljs-variable">$pointsADV</span> )) &amp;&amp; (( <span class="hljs-variable">$pointsMHR</span> &gt;= <span class="hljs-variable">$pointsADV</span> -5 ))
    <span class="hljs-keyword">then</span>
        nomADV=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$ligne</span> | cut -d , -f 1)
        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$nomADV</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
</div></code></pre>
<h2 id="exercice-5">Exercice 5</h2>
<p>Ecrire un script dans <code>ex5.sh</code> qui affiche le nombre de fichiers dans le dossier spécifié en paramètre.</p>
<h3 id="solution-5">Solution 5</h3>
<pre class="hljs"><code><div>c=0
<span class="hljs-keyword">for</span> entree <span class="hljs-keyword">in</span> <span class="hljs-variable">$1</span>/*
<span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ -f <span class="hljs-variable">$entree</span> ]]
    <span class="hljs-keyword">then</span>
        c=$(( <span class="hljs-variable">$c</span> + 1))
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
<span class="hljs-built_in">echo</span> <span class="hljs-variable">$c</span>
</div></code></pre>
<h2 id="exercice-6">Exercice 6</h2>
<p>Ecrire un script dans le fichier <code>ex6.sh</code> qui crée un dictionnaire <code>tab</code> et qui donne une valeur aléatoire entre 0 et 100 à la clef <code>A</code> puis qui incrémente de 1 cette valeur. Finir en affichant la valeur de la clef <code>A</code>.</p>
<h3 id="solution-6">Solution 6</h3>
<pre class="hljs"><code><div><span class="hljs-built_in">declare</span> -A tab
tab[A]=$(( <span class="hljs-variable">$RANDOM</span> % 100 ))
tab[A]=$(( <span class="hljs-variable">${tab[A]}</span> + 1 ))

<span class="hljs-built_in">echo</span> <span class="hljs-variable">${tab[A]}</span>
</div></code></pre>

</body>
</html>
